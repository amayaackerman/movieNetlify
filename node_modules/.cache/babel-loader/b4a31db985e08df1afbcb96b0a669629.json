{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { APIService } from \"@/http/APIService\";\nconst apiService = new APIService();\nimport axios from \"axios\";\nimport router from \"../router\";\nexport default {\n  data() {\n    return {\n      movies: {},\n      validUserName: \"Guest\",\n      movieSize: 0,\n      showMsg: '',\n      isMobile: false,\n      headers: [{\n        text: 'Name',\n        sortable: false,\n        align: 'left'\n      }, {\n        text: 'Description',\n        sortable: false,\n        align: 'left'\n      }, {\n        text: 'Year',\n        sortable: false,\n        align: 'left'\n      }, {\n        text: 'Rating',\n        sortable: false,\n        align: 'left'\n      }, {\n        text: 'Update',\n        sortable: false,\n        align: 'center'\n      }, {\n        text: 'Delete',\n        sortable: false,\n        align: 'center'\n      }]\n    };\n  },\n\n  mounted() {\n    this.getMovies(); //   this.showMessages();\n  },\n\n  methods: {\n    onResize() {\n      if (window.innerWidth > 600) this.isMobile = true;else this.isMobile = false;\n    },\n\n    showMessages() {\n      console.log(this.$route.params.msg);\n\n      if (this.$route.params.msg) {\n        this.showMsg = this.$route.params.msg;\n      }\n    },\n\n    getMovies() {\n      apiService.getMovieList().then(response => {\n        this.movies = response.data.data;\n        this.movieSize = this.movies.length;\n\n        if (localStorage.getItem(\"isAuthenticates\") && JSON.parse(localStorage.getItem(\"isAuthenticates\")) === true) {\n          this.validUserName = JSON.parse(localStorage.getItem(\"log_user\"));\n        }\n      }).catch(error => {\n        if (error.response.status === 401) {\n          localStorage.removeItem(\"isAuthenticates\");\n          localStorage.removeItem(\"log_user\");\n          localStorage.removeItem(\"token\");\n          router.push(\"/auth\");\n        }\n      });\n    },\n\n    addNewMovie() {\n      if (localStorage.getItem(\"isAuthenticates\") && JSON.parse(localStorage.getItem(\"isAuthenticates\")) === true) {\n        router.push('/movie-create');\n      } else {\n        router.push(\"/auth\");\n      }\n    },\n\n    updateMovie(movie) {\n      router.push(\"/movie-create/\" + movie.pk);\n    },\n\n    deleteMovie(movie) {\n      if (confirm(\"Do you really want to delete?\")) {\n        apiService.deleteMovie(movie.pk).then(response => {\n          if (response.status === 204) {\n            router.push('/movie-list/deleted/');\n            this.getMovies();\n          }\n        }).catch(error => {\n          if (error.response.status === 401) {\n            localStorage.removeItem('isAuthenticates');\n            localStorage.removeItem('log_user');\n            localStorage.removeItem('token');\n            router.push(\"/auth\");\n          }\n        });\n      }\n    }\n\n  }\n};","map":{"version":3,"mappings":";AA4GI,SAASA,UAAT,QAA2B,mBAA3B;AACA,MAAMC,UAAS,GAAI,IAAID,UAAJ,EAAnB;AACA,OAAOE,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB;AAEA,eAAe;EACXC,IAAI,GAAG;IACH,OAAO;MACHC,MAAM,EAAE,EADL;MAEHC,aAAa,EAAE,OAFZ;MAGHC,SAAS,EAAE,CAHR;MAIHC,OAAO,EAAE,EAJN;MAKHC,QAAQ,EAAE,KALP;MAMHC,OAAO,EAAE,CACL;QAACC,IAAI,EAAE,MAAP;QAAeC,QAAQ,EAAE,KAAzB;QAAgCC,KAAK,EAAE;MAAvC,CADK,EAEL;QAACF,IAAI,EAAE,aAAP;QAAsBC,QAAQ,EAAE,KAAhC;QAAuCC,KAAK,EAAE;MAA9C,CAFK,EAGL;QAACF,IAAI,EAAE,MAAP;QAAeC,QAAQ,EAAE,KAAzB;QAAgCC,KAAK,EAAE;MAAvC,CAHK,EAIL;QAACF,IAAI,EAAE,QAAP;QAAiBC,QAAQ,EAAE,KAA3B;QAAkCC,KAAK,EAAE;MAAzC,CAJK,EAKL;QAACF,IAAI,EAAE,QAAP;QAAiBC,QAAQ,EAAE,KAA3B;QAAkCC,KAAK,EAAE;MAAzC,CALK,EAML;QAACF,IAAI,EAAE,QAAP;QAAiBC,QAAQ,EAAE,KAA3B;QAAkCC,KAAK,EAAE;MAAzC,CANK;IANN,CAAP;EAeH,CAjBU;;EAkBXC,OAAO,GAAG;IACN,KAAKC,SAAL,GADM,CAEN;EACH,CArBU;;EAsBXC,OAAO,EAAE;IACLC,QAAQ,GAAG;MACP,IAAIC,MAAM,CAACC,UAAP,GAAoB,GAAxB,EACI,KAAKV,QAAL,GAAgB,IAAhB,CADJ,KAGI,KAAKA,QAAL,GAAgB,KAAhB;IACP,CANI;;IAOLW,YAAY,GAAE;MACVC,OAAO,CAACC,GAAR,CAAY,KAAKC,MAAL,CAAYC,MAAZ,CAAmBC,GAA/B;;MACA,IAAI,KAAKF,MAAL,CAAYC,MAAZ,CAAmBC,GAAvB,EAA4B;QACxB,KAAKjB,OAAL,GAAe,KAAKe,MAAL,CAAYC,MAAZ,CAAmBC,GAAlC;MACJ;IACH,CAZI;;IAaLV,SAAS,GAAG;MACRd,UAAS,CACJyB,YADL,GAEKC,IAFL,CAEWC,QAAD,IAAc;QAChB,KAAKvB,MAAL,GAAcuB,QAAQ,CAACxB,IAAT,CAAcA,IAA5B;QACA,KAAKG,SAAL,GAAiB,KAAKF,MAAL,CAAYwB,MAA7B;;QACA,IACIC,YAAY,CAACC,OAAb,CAAqB,iBAArB,KACAC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAX,MAAwD,IAF5D,EAGE;UACE,KAAKzB,aAAL,GAAqB0B,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,UAArB,CAAX,CAArB;QACJ;MACH,CAXL,EAYKG,KAZL,CAYYC,KAAD,IAAW;QACd,IAAIA,KAAK,CAACP,QAAN,CAAeQ,MAAf,KAA0B,GAA9B,EAAmC;UAC/BN,YAAY,CAACO,UAAb,CAAwB,iBAAxB;UACAP,YAAY,CAACO,UAAb,CAAwB,UAAxB;UACAP,YAAY,CAACO,UAAb,CAAwB,OAAxB;UACAlC,MAAM,CAACmC,IAAP,CAAY,OAAZ;QACJ;MACH,CAnBL;IAoBH,CAlCI;;IAmCLC,WAAW,GAAG;MACV,IAAIT,YAAY,CAACC,OAAb,CAAqB,iBAArB,KACGC,IAAI,CAACC,KAAL,CAAWH,YAAY,CAACC,OAAb,CAAqB,iBAArB,CAAX,MAAwD,IAD/D,EACqE;QACjE5B,MAAM,CAACmC,IAAP,CAAY,eAAZ;MACJ,CAHA,MAGO;QACHnC,MAAM,CAACmC,IAAP,CAAY,OAAZ;MACJ;IACH,CA1CI;;IA2CLE,WAAW,CAACC,KAAD,EAAQ;MACftC,MAAM,CAACmC,IAAP,CAAY,mBAAmBG,KAAK,CAACC,EAArC;IACH,CA7CI;;IA8CLC,WAAW,CAACF,KAAD,EAAQ;MACf,IAAGG,OAAO,CAAC,+BAAD,CAAV,EAA6C;QACzC3C,UAAU,CAAC0C,WAAX,CAAuBF,KAAK,CAACC,EAA7B,EAAiCf,IAAjC,CAAsCC,QAAO,IAAK;UAC9C,IAAIA,QAAQ,CAACQ,MAAT,KAAoB,GAAxB,EAA6B;YACzBjC,MAAM,CAACmC,IAAP,CAAY,sBAAZ;YACA,KAAKvB,SAAL;UACJ;QACH,CALD,EAKGmB,KALH,CAKSC,KAAI,IAAK;UACd,IAAIA,KAAK,CAACP,QAAN,CAAeQ,MAAf,KAA0B,GAA9B,EAAmC;YAC/BN,YAAY,CAACO,UAAb,CAAwB,iBAAxB;YACAP,YAAY,CAACO,UAAb,CAAwB,UAAxB;YACAP,YAAY,CAACO,UAAb,CAAwB,OAAxB;YACAlC,MAAM,CAACmC,IAAP,CAAY,OAAZ;UACJ;QACH,CAZD;MAaJ;IACJ;;EA9DK;AAtBE,CAAf","names":["APIService","apiService","axios","router","data","movies","validUserName","movieSize","showMsg","isMobile","headers","text","sortable","align","mounted","getMovies","methods","onResize","window","innerWidth","showMessages","console","log","$route","params","msg","getMovieList","then","response","length","localStorage","getItem","JSON","parse","catch","error","status","removeItem","push","addNewMovie","updateMovie","movie","pk","deleteMovie","confirm"],"sourceRoot":"","sources":["/Users/amayaackerman/Desktop/ISQA4900/movie-fe/src/components/MovieList.vue"],"sourcesContent":["<template>\n    <div class=\"container-fluid\">\n        <!--Welcome Title -->\n        <div class=\"row align-items-center justify-content-center\">\n            <div class=\"col col-12 align-items-center justify-content-center\">\n                <blockquote>\n                    Welcome {{ validUserName }}!\n                    <footer>\n                        <small>\n                            <em>&mdash; Every great film should seem new every time you see it.- Roger Ebert</em>\n                        </small>\n                    </footer>\n                </blockquote>\n            </div>\n            <div class=\"col-12 col-md-10 col-lg-10 col-12 align-items-center justify-content-center\">\n                <div class=\"alert alert-success\"\n                     v-if=\"showMsg === 'new'\"\n                     :value=\"true\">\n                    New movie has been added.\n                </div>\n                <div class=\"alert alert-success\"\n                     v-if=\"showMsg === 'update'\"\n                     :value=\"true\">\n                    Movie information has been updated.\n                </div>\n                <div class=\"alert alert-success\"\n                     v-if=\"showMsg === 'deleted'\"\n                     :value=\"true\">\n                    Selected Movie has been deleted.\n                </div>\n            </div>\n        </div>\n\n        <!-- Data table -->\n        <div class=\"row align-items-center justify-content-center\">\n            <div class=\"d-md-none\" id=\"collapsable-card\" style=\"width: 80%\">\n                <button type=\"button\" class=\"btn btn-primary\" @click=\"addNewMovie\" style=\"background-color: white; border-color: white\">\n                    <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"50\" fill=\"#0275d8\" class=\"bi bi-plus-circle-fill\" viewBox=\"0 0 16 16\">\n                        <path d=\"M16 8A8 8 0 1 1 0 8a8 8 0 0 1 16 0zM8.5 4.5a.5.5 0 0 0-1 0v3h-3a.5.5 0 0 0 0 1h3v3a.5.5 0 0 0 1 0v-3h3a.5.5 0 0 0 0-1h-3v-3z\"/>\n                    </svg>\n                </button>\n                <div class=\"card\" v-for=\"movie in movies\" v-bind:key=\"movie\">\n                    <div class=\"card-header\" :id=\"'heading' + movie.pk\">\n                        <button class=\"btn btn-link collapsed\" data-bs-toggle=\"collapse\" :data-bs-target=\"'#collapse' + movie.pk\" aria-expanded=\"true\" :aria-controls=\"'collapse' + movie.pk\">\n                            <h6 style=\"color: #0275d8; float: left\">{{movie.name}}</h6>\n                        </button>\n                    </div>\n\n                    <div :id=\"'collapse' + movie.pk\" class=\"collapse\" :aria-labelledby=\"'heading' + movie.pk\" data-bs-parent=\"#collapsable-card\">\n                        <div class=\"card-body\">\n                            <p><b>Rating:</b> {{movie.rating}}</p>\n                            <p><b>Year:</b> {{movie.year}}</p>\n                            <p>{{movie.description}}</p>\n                            <div class=\"btn-group\">\n                            <button @click=\"updateMovie(movie)\" style=\"background-color: transparent; padding: 0;\">\n                                <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-pencil\" viewBox=\"0 0 16 16\">\n                                    <path d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\"/>\n                                </svg></button>\n                            <button @click=\"deleteMovie(movie)\" style=\"background-color: transparent; padding: 0;\">\n                                <svg @click=\"deleteMovie\" xmlns=\"http://www.w3.org/2000/svg\" width=\"20\" height=\"20\" fill=\"currentColor\" class=\"bi bi-trash-fill\" viewBox=\"0 0 16 16\">\n                                    <path d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"/>\n                                </svg></button>\n                        </div>\n                        </div>\n                    </div>\n                </div>\n\n            </div>\n            <div class=\"col col-12 col-md-10 d-none d-xl-block d-lg-block d-md-block\">\n                <table class=\"table table-hover\" style=\"overflow-y: auto\"\n                       :headers=\"headers\">\n                    <thead>\n                    <tr>\n                        <th scope=\"col\">Name</th>\n                        <th scope=\"col\">Description</th>\n                        <th scope=\"col\">Year</th>\n                        <th scope=\"col\">Rating</th>\n                        <th scope=\"col\">Update</th>\n                        <th scope=\"col\">Delete</th>\n                    </tr>\n                    </thead>\n                    <tbody>\n                    <tr v-for = \"movie in movies\" v-bind:key=\"movie\">\n                        <th scope=\"row\">{{movie.name}}</th>\n                        <td>{{movie.description}}</td>\n                        <td>{{movie.year}}</td>\n                        <td>{{movie.rating}}</td>\n                        <td @click=\"updateMovie(movie)\"><button style=\"background-color: transparent; padding: 0;\">\n                            <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-pencil\" viewBox=\"0 0 16 16\">\n                                <path d=\"M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z\"/>\n                            </svg></button>\n                        </td>\n                        <td @click=\"deleteMovie(movie)\"><button style=\"background-color: transparent; padding: 0;\">\n                            <svg @click=\"deleteMovie\" xmlns=\"http://www.w3.org/2000/svg\" width=\"16\" height=\"16\" fill=\"currentColor\" class=\"bi bi-trash-fill\" viewBox=\"0 0 16 16\">\n                                <path d=\"M2.5 1a1 1 0 0 0-1 1v1a1 1 0 0 0 1 1H3v9a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V4h.5a1 1 0 0 0 1-1V2a1 1 0 0 0-1-1H10a1 1 0 0 0-1-1H7a1 1 0 0 0-1 1H2.5zm3 4a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 .5-.5zM8 5a.5.5 0 0 1 .5.5v7a.5.5 0 0 1-1 0v-7A.5.5 0 0 1 8 5zm3 .5v7a.5.5 0 0 1-1 0v-7a.5.5 0 0 1 1 0z\"/>\n                            </svg></button>\n                        </td>\n                    </tr>\n                    </tbody>\n                </table>\n                <button type=\"button\" class=\"btn btn-primary\" @click=\"addNewMovie\">Add New Movie</button>\n            </div>\n        </div>\n    </div>\n</template>\n\n\n<script>\n    import { APIService } from \"@/http/APIService\";\n    const apiService = new APIService();\n    import axios from \"axios\";\n    import router from \"../router\";\n\n    export default {\n        data() {\n            return {\n                movies: {},\n                validUserName: \"Guest\",\n                movieSize: 0,\n                showMsg: '',\n                isMobile: false,\n                headers: [\n                    {text: 'Name', sortable: false, align: 'left'},\n                    {text: 'Description', sortable: false, align: 'left',},\n                    {text: 'Year', sortable: false, align: 'left',},\n                    {text: 'Rating', sortable: false, align: 'left',},\n                    {text: 'Update', sortable: false, align: 'center',},\n                    {text: 'Delete', sortable: false, align: 'center',},\n                ],\n            };\n        },\n        mounted() {\n            this.getMovies();\n            //   this.showMessages();\n        },\n        methods: {\n            onResize() {\n                if (window.innerWidth > 600)\n                    this.isMobile = true;\n                else\n                    this.isMobile = false;\n            },\n            showMessages(){\n                console.log(this.$route.params.msg)\n                if (this.$route.params.msg) {\n                    this.showMsg = this.$route.params.msg;\n                }\n            },\n            getMovies() {\n                apiService\n                    .getMovieList()\n                    .then((response) => {\n                        this.movies = response.data.data;\n                        this.movieSize = this.movies.length;\n                        if (\n                            localStorage.getItem(\"isAuthenticates\") &&\n                            JSON.parse(localStorage.getItem(\"isAuthenticates\")) === true\n                        ) {\n                            this.validUserName = JSON.parse(localStorage.getItem(\"log_user\"));\n                        }\n                    })\n                    .catch((error) => {\n                        if (error.response.status === 401) {\n                            localStorage.removeItem(\"isAuthenticates\");\n                            localStorage.removeItem(\"log_user\");\n                            localStorage.removeItem(\"token\");\n                            router.push(\"/auth\");\n                        }\n                    });\n            },\n            addNewMovie() {\n                if (localStorage.getItem(\"isAuthenticates\")\n                    && JSON.parse(localStorage.getItem(\"isAuthenticates\")) === true) {\n                    router.push('/movie-create');\n                } else {\n                    router.push(\"/auth\");\n                }\n            },\n            updateMovie(movie) {\n                router.push(\"/movie-create/\" + movie.pk);\n            },\n            deleteMovie(movie) {\n                if(confirm(\"Do you really want to delete?\")) {\n                    apiService.deleteMovie(movie.pk).then(response => {\n                        if (response.status === 204) {\n                            router.push('/movie-list/deleted/')\n                            this.getMovies()\n                        }\n                    }).catch(error => {\n                        if (error.response.status === 401) {\n                            localStorage.removeItem('isAuthenticates');\n                            localStorage.removeItem('log_user');\n                            localStorage.removeItem('token');\n                            router.push(\"/auth\");\n                        }\n                    });\n                }\n            }\n        },\n    };\n</script>\n\n<style>\n    button {\n        padding: 1rem;\n        border: 0;\n        cursor: pointer;\n    }\n</style>\n"]},"metadata":{},"sourceType":"module"}