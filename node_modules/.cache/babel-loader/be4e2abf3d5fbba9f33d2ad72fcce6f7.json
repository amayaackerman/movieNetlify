{"ast":null,"code":"import router from \"../router\";\nimport { APIService } from \"../http/APIService\";\nconst apiService = new APIService();\nexport default {\n  name: \"Auth\",\n  data: () => ({\n    credentials: {},\n    valid: true,\n    showMsg: \"\",\n    loading: false,\n    rules: {\n      username: [v => !!v || \"Username is required\", v => v && v.length > 3 || \"A username must be more than 3 characters long\", v => /^[a-z0-9_]+$/.test(v) || \"A username can only contain letters and digits\"],\n      password: [v => !!v || \"Password is required\", v => v && v.length > 7 || \"The password must be longer than 7 characters\"]\n    },\n    showPassword: false\n  }),\n  methods: {\n    login() {\n      // checking if the input is valid\n      console.log(\"IS THIS THING WORKING\");\n\n      if (this.$refs.form) {\n        this.loading = true;\n        apiService.authenticateLogin(this.credentials).then(res => {\n          localStorage.setItem(\"token\", res.data.token);\n          localStorage.setItem(\"isAuthenticates\", JSON.stringify(true));\n          localStorage.setItem(\"log_user\", JSON.stringify(this.credentials.username)); //router.push(\"/\");\n          //router.go(-1);\n\n          window.location = \"/\";\n        }).catch(e => {\n          this.loading = false;\n          localStorage.removeItem(\"isAuthenticates\");\n          localStorage.removeItem(\"log_user\");\n          localStorage.removeItem(\"token\"); // router.go(-1);\n\n          this.showMsg = \"error\";\n        });\n      }\n    },\n\n    testMethod() {\n      console.log(this.$refs.form);\n      console.log(\"hey\");\n    }\n\n  }\n};","map":{"version":3,"mappings":"AAsGA,OAAOA,MAAP,MAAmB,WAAnB;AACA,SAASC,UAAT,QAA2B,oBAA3B;AACA,MAAMC,UAAS,GAAI,IAAID,UAAJ,EAAnB;AAGA,eAAe;EACbE,IAAI,EAAE,MADO;EAIbC,IAAI,EAAE,OAAO;IACXC,WAAW,EAAE,EADF;IAEXC,KAAK,EAAE,IAFI;IAGXC,OAAO,EAAE,EAHE;IAIXC,OAAO,EAAE,KAJE;IAKXC,KAAK,EAAE;MACLC,QAAQ,EAAE,CACPC,CAAD,IAAO,CAAC,CAACA,CAAF,IAAO,sBADN,EAEPA,CAAD,IACGA,KAAKA,CAAC,CAACC,MAAF,GAAW,CAAjB,IACA,gDAJM,EAKPD,CAAD,IACE,eAAeE,IAAf,CAAoBF,CAApB,KACA,gDAPM,CADL;MAULG,QAAQ,EAAE,CACPH,CAAD,IAAO,CAAC,CAACA,CAAF,IAAO,sBADN,EAEPA,CAAD,IACGA,KAAKA,CAAC,CAACC,MAAF,GAAW,CAAjB,IACA,+CAJM;IAVL,CALI;IAsBXG,YAAY,EAAE;EAtBH,CAAP,CAJO;EA4BbC,OAAO,EAAE;IACPC,KAAK,GAAG;MACN;MACAC,OAAO,CAACC,GAAR,CAAY,uBAAZ;;MACA,IAAI,KAAKC,KAAL,CAAWC,IAAf,EAAqB;QACnB,KAAKb,OAAL,GAAe,IAAf;QACAN,UAAS,CACNoB,iBADH,CACqB,KAAKjB,WAD1B,EAEGkB,IAFH,CAESC,GAAD,IAAS;UACbC,YAAY,CAACC,OAAb,CAAqB,OAArB,EAA8BF,GAAG,CAACpB,IAAJ,CAASuB,KAAvC;UACAF,YAAY,CAACC,OAAb,CAAqB,iBAArB,EAAwCE,IAAI,CAACC,SAAL,CAAe,IAAf,CAAxC;UACAJ,YAAY,CAACC,OAAb,CACE,UADF,EAEEE,IAAI,CAACC,SAAL,CAAe,KAAKxB,WAAL,CAAiBK,QAAhC,CAFF,EAHa,CAOb;UACA;;UACAoB,MAAM,CAACC,QAAP,GAAkB,GAAlB;QACD,CAZH,EAaGC,KAbH,CAaUC,CAAD,IAAO;UACZ,KAAKzB,OAAL,GAAe,KAAf;UACAiB,YAAY,CAACS,UAAb,CAAwB,iBAAxB;UACAT,YAAY,CAACS,UAAb,CAAwB,UAAxB;UACAT,YAAY,CAACS,UAAb,CAAwB,OAAxB,EAJY,CAKZ;;UACA,KAAK3B,OAAL,GAAe,OAAf;QACD,CApBH;MAqBF;IACD,CA5BM;;IA6BP4B,UAAU,GAAG;MACXjB,OAAO,CAACC,GAAR,CAAY,KAAKC,KAAL,CAAWC,IAAvB;MACAH,OAAO,CAACC,GAAR,CAAY,KAAZ;IACD;;EAhCM;AA5BI,CAAf","names":["router","APIService","apiService","name","data","credentials","valid","showMsg","loading","rules","username","v","length","test","password","showPassword","methods","login","console","log","$refs","form","authenticateLogin","then","res","localStorage","setItem","token","JSON","stringify","window","location","catch","e","removeItem","testMethod"],"sourceRoot":"","sources":["/Users/amayaackerman/Desktop/ISQA4900/movie-fe/src/components/Auth.vue"],"sourcesContent":["<template>\n  `\n  <div class=\"container\">\n    <div class=\"row align-items-center justify-content-center\">\n      <div class=\"col-12 col-sm-6 col-md-4 col-lg-4\">\n        <div class=\"card mx-auto shadow\">\n          <div class=\"card-body\">\n            <div class=\"card-title\"><span>Login</span></div>\n            <div\n              v-if=\"showMsg === 'error'\"\n              close-icon=\"mdi-close-circle\"\n              :value=\"true\"\n              class=\"alert alert-danger\"\n              role=\"alert\"\n              dense\n            >\n              Invalid username or password. Please Try again.\n            </div>\n            <div class=\"card-text pt-2\">\n              <div\n                class=\"row align-items-center justify-content-center\"\n                v-if=\"loading\"\n              >\n                <div class=\"progress\">\n                  <div\n                    class=\"\n                      progress-bar progress-bar-striped progress-bar-animated\n                    \"\n                    role=\"progressbar\"\n                    aria-valuenow=\"75\"\n                    aria-valuemin=\"0\"\n                    aria-valuemax=\"100\"\n                    style=\"width: 75%\"\n                  ></div>\n                </div>\n              </div>\n\n\n\n\n\n              <div class=\"col-md-10 mb-3\">\n                <div class=\"input-group\">\n                  <div class=\"input-group-prepend\">\n                    <span class=\"input-group-text\">@</span>\n                  </div>\n                  <input\n\n                    v-model=\"credentials.username\"\n                    :counter=\"70\"\n                    label=\"Username\"\n                    :rules=\"rules.username\"\n                    maxlength=\"70\"\n                    required\n                    type=\"text\"\n                    class=\"form-control mb-3\"\n                    placeholder=\"Username\"\n                    aria-describedby=\"inputGroupPrepend2\"\n                  />\n\n\n                  <div class=\"w-100\"></div>\n\n\n                  <div class=\"input-group-prepend\">\n                    <span class=\"input-group-text\">***</span>\n                  </div>\n                  <input\n                    :type=\"showPassword ? 'text' : 'Password'\"\n                    v-model=\"credentials.password\"\n                    label=\"Password\"\n                    :rules=\"rules.password\"\n                    maxlength=\"20\"\n                    required\n                    :append-icon=\"showPassword ? 'mdi-eye' : 'mdi-eye-off'\"\n                    @click:append=\"showPassword = ! showPassword\"\n                    class=\"form-control\"\n                    placeholder=\"Password\"\n                    aria-describedby=\"inputGroupPrepend2\"\n\n\n                  />\n                </div>\n              </div>\n\n\n              <button ref =\"form\" @click.prevent=\"login\" class=\"btn btn-primary\">Login</button>\n\n\n\n\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n  `\n</template>\n\n\n<script>\nimport router from \"../router\";\nimport { APIService } from \"../http/APIService\";\nconst apiService = new APIService();\n\n\nexport default {\n  name: \"Auth\",\n\n\n  data: () => ({\n    credentials: {},\n    valid: true,\n    showMsg: \"\",\n    loading: false,\n    rules: {\n      username: [\n        (v) => !!v || \"Username is required\",\n        (v) =>\n          (v && v.length > 3) ||\n          \"A username must be more than 3 characters long\",\n        (v) =>\n          /^[a-z0-9_]+$/.test(v) ||\n          \"A username can only contain letters and digits\",\n      ],\n      password: [\n        (v) => !!v || \"Password is required\",\n        (v) =>\n          (v && v.length > 7) ||\n          \"The password must be longer than 7 characters\",\n      ],\n    },\n    showPassword: false,\n  }),\n  methods: {\n    login() {\n      // checking if the input is valid\n      console.log(\"IS THIS THING WORKING\")\n      if (this.$refs.form) {\n        this.loading = true;\n        apiService\n          .authenticateLogin(this.credentials)\n          .then((res) => {\n            localStorage.setItem(\"token\", res.data.token);\n            localStorage.setItem(\"isAuthenticates\", JSON.stringify(true));\n            localStorage.setItem(\n              \"log_user\",\n              JSON.stringify(this.credentials.username)\n            );\n            //router.push(\"/\");\n            //router.go(-1);\n            window.location = \"/\";\n          })\n          .catch((e) => {\n            this.loading = false;\n            localStorage.removeItem(\"isAuthenticates\");\n            localStorage.removeItem(\"log_user\");\n            localStorage.removeItem(\"token\");\n            // router.go(-1);\n            this.showMsg = \"error\";\n          });\n      }\n    },\n    testMethod() {\n      console.log(this.$refs.form);\n      console.log(\"hey\");\n    },\n  },\n};\n</script>\n\n\n<style>\ninput {\n  padding: 1rem;\n}\n\n\nform {\n  display: flex;\n  justify-content: center;\n}\n</style>\n\n"]},"metadata":{},"sourceType":"module"}